@page "/Account/Manage/Commandes"
@model VignobleWEB.Pages.Account.Manage.Commandes.IndexModel
@{
    ViewData["Title"] = "Commandes";
    ViewData["ActivePage"] = ManageNavPages.Commande;
}
@section Scripts {
        <script src="~/js/gestionMessageModal.js" asp-append-version="true"></script>
        <partial name="_ValidationScriptsPartial" />
}
@if (Model.MessagePourLaModal != null && Model.MessagePourLaModal.Message != string.Empty)
{
    Html.RenderPartial("./VuePartielle/Message", Model.MessagePourLaModal);
}
<h3>@ViewData["Title"]</h3>
<partial name="_StatusMessage" for="StatusMessage" />
<div class="row">
    <div class="col-md-6">
        <form id="profile-form" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
            @if (Model.ListeEnteteCommande.Count > 0)
            {
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Numéro de commande</th>
                            <th>Statut de la commande</th>
                            <th>Date de la commande</th>
                            <th>Payé</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (Core.Models.HeaderOrder enteteCommande in Model.ListeEnteteCommande)
                    {
                        <tr>
                            <td>@enteteCommande.NumOrder</td>
                            <td>@Model.statusOrders.Where(item => item.Id == enteteCommande.StatusId).Single().Name</td>
                            <td>@enteteCommande.Date</td>
                            @if (enteteCommande.Paid == true)
                            {
                                <td>Oui</td>
                            }
                            else
                            {
                                <td>Non</td>
                            }
                                
                            <td style="text-align: center">
                                <a asp-page="/Account/Manage/Commandes/Details" asp-route-idCommande="@enteteCommande.Id">
                                    <img src="/img/details.png" style="width: 32px;" alt="logo">
                                </a>
                            </td>
                        </tr>
                    }

                    </tbody>
                </table>
            }
            else
            {
                <strong>
                    Aucune commande n'a été éffectuée !
                </strong>
            }
            
        </form>
    </div>
</div>
